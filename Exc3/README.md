# Трейсинг

## Мотивация

Внедрение трейсинга позволит компании «Александрит» получить детальное понимание о том, где и почему заказы могут «ломаться» или задерживаться на каждом этапе обработки. Это критически важно для быстрого обнаружения и устранения проблем, что, в свою очередь, повышает эффективность работы и удовлетворенность клиентов.

Технические и бизнес-метрики, на которые влияет трейсинг:
1. Время обработки заказа: Сокращение задержек и оптимизация процесса.
2. Частота ошибок в обработке: Быстрое обнаружение и устранение ошибок.
3. Коэффициент успешности API-запросов: Улучшение производительности API.
4. Среднее время ответа системы: Оптимизация времени отклика.
5. Удовлетворенность клиентов: Уменьшение количества жалоб благодаря более точной и быстрой обработке заказов.



## Предлагаемое решение

Системы для покрытия трейсингом:
- Shop API
- CRM API
- MES API
- RabbitMQ интеграция
- 3D-файловое хранилище

Данные для трейсинга:
- Время начала и завершения обработки каждого заказа.
- Детали API-запросов и ответов (включая ошибки).
- Информация о маршрутах сообщений в RabbitMQ.
- Время загрузки и обработки 3D-моделей.
- Идентификаторы заказов и их статусы.

Технологии для реализации:
- OpenTelemetry для сбора и агрегации трейсинг-данных.
- Jaeger или Zipkin для визуализации и анализа трейсинга.

Компоненты для внедрения:
- Агенты трейсинга в каждом ключевом сервисе (Shop API, CRM API, MES API).
- Интеграция с RabbitMQ для отслеживания сообщений.
- Хранилище трейсинг-данных.

Ссылка на обновленную диаграмму C4:
Обновленная диаграмма C4 (добавить ссылку после создания диаграммы).

## Компромиссы

Трейсинг может быть неэффективен в системах, где:
- Сложно интегрировать проприетарные компоненты, не поддерживающие нужные форматы.
- Высокий объем данных создает значительную нагрузку и требует дорогих ресурсов для хранения и обработки.
- Внедрение трейсинга требует значительных изменений в архитектуре, что может быть дорого и времязатратно.

## Аспекты безопасности

- Аутентификация и авторизация: Доступ к системе трейсинга только для сотрудников с ролью «Поддержка».
- Шифрование данных: Использование TLS/SSL для передачи трейсинг-данных.
- Логирование доступа: Ведение логов всех операций в системе трейсинга для последующего анализа.

## Автоматический мониторинг и алертинг

- Мониторинг: Настроить автоматическое отслеживание всех ключевых показателей трейсинга.
- Алертинг: Интегрировать с системами уведомлений для мгновенного оповещения о проблемах с прохождением заказов.